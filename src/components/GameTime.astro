---
import fromUnixTime from 'date-fns/fromUnixTime';
import { format, utcToZonedTime } from 'date-fns-tz';
import { isAfter } from 'date-fns';

const { gameTime } = Astro.props;

const unixToLosAngeles = (timestamp: number) => utcToZonedTime(fromUnixTime(timestamp), 'America/Los_Angeles');

let time = format(unixToLosAngeles(gameTime), 'hh:mm a');
let timeZone = format(unixToLosAngeles(gameTime), 'z');

if (isAfter(Date.now(), fromUnixTime(gameTime))) {
  time = 'Game Started';
  timeZone = '';
}
---

<div class="text-xs">
  <span class="font-bold">{ time }</span>
  <span class="pl-1 self-start">{ timeZone }</span>
</div>
